<div class="nm-page">
  <input id="search" type="text" class="form-control" placeholder="Search for a block...">

  <br/>

  <div class="panel-group" id="accordion" role="tablist">
  {% for category in page.blocks.categories %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#{{ category.id }}">
              {{ category.title }}
          </a>
        </h4>
      </div>
      <div id="{{ category.id }}" class="panel-collapse collapse in">
        <div class="panel-body">
          {% for block in category.blocks %}
            <a class="btn {{ category.btnClass }} nm-btn-block">{{ block }}</a>
          {% endfor %}
        </div>
      </div>
   </div>
  {% endfor %}
  </div>
</div>

<script>
document.onready = function() {
  $('#search').keyup(function(e) {
    hideUnmatched($(this).val());
  });


  function hideUnmatched(expr) {
    expr = new RegExp(expr, 'i');

    $('.nm-btn-block').each(function() {
      if (!$(this).text().match(expr)) $(this).hide();
      else $(this).show();
    });
  }
}
</script>
